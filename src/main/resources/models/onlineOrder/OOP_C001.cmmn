<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/CMMN/20151109/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:flowable="http://flowable.org/cmmn" xmlns:cmmndi="http://www.omg.org/spec/CMMN/20151109/CMMNDI" xmlns:dc="http://www.omg.org/spec/CMMN/20151109/DC" xmlns:di="http://www.omg.org/spec/CMMN/20151109/DI" xmlns:design="http://flowable.org/design" targetNamespace="http://flowable.org/cmmn" design:palette="flowable-engage-case-palette">
  <case id="OOP_C001" name="OOP_C001 Online Ordering Processing" flowable:initiatorVariableName="initiator" flowable:candidateStarterGroups="flowableUser">
    <casePlanModel id="onecaseplanmodel1" name="Case plan model" flowable:formKey="OOP_F001" flowable:formFieldValidation="false" autoComplete="true">
      <extensionElements>
        <flowable:caseSequence variableName="caseSequence"><![CDATA[OOB_SEQ001]]></flowable:caseSequence>
        <flowable:custom-view-element customViewKey="case-view" menuNavigationSize="expanded"></flowable:custom-view-element>
        <flowable:default-menu-navigation-size><![CDATA[expanded]]></flowable:default-menu-navigation-size>
        <flowable:caseInstanceName><![CDATA[Case Order]]></flowable:caseInstanceName>
        <flowable:work-form-field-validation><![CDATA[false]]></flowable:work-form-field-validation>
        <flowable:workformkey><![CDATA[OOP_F002]]></flowable:workformkey>
        <design:stencilid><![CDATA[CasePlanModel]]></design:stencilid>
      </extensionElements>
      <planItem id="planItemexpandedStage2" name="Purchase Order Processing" definitionRef="expandedStage2">
        <entryCriterion id="entryCriterion1" sentryRef="sentryentryCriterion1"></entryCriterion>
      </planItem>
      <planItem id="planItemexpandedStage3" name="Closing" definitionRef="expandedStage3">
        <entryCriterion id="entryCriterion2" sentryRef="sentryentryCriterion2"></entryCriterion>
      </planItem>
      <planItem id="planItemexpandedStage1" name="Purchase Order Request" definitionRef="expandedStage1"></planItem>
      <planItem id="planItemcmmnTask_1" name="Case View" definitionRef="cmmnTask_1">
        <itemControl>
          <extensionElements>
            <flowable:parentCompletionRule type="ignore"></flowable:parentCompletionRule>
          </extensionElements>
        </itemControl>
      </planItem>
      <planItem id="planItemcmmnTask_2" name="Execute Task" definitionRef="cmmnTask_2">
        <entryCriterion id="cmmnEntrySentry_3" sentryRef="sentrycmmnEntrySentry_3"></entryCriterion>
      </planItem>
      <planItem id="planItemuserEventListener1" name="Create Ad-Hoc Task" definitionRef="userEventListener1"></planItem>
      <sentry id="sentryentryCriterion1">
        <extensionElements>
          <design:stencilid><![CDATA[EntryCriterion]]></design:stencilid>
          <design:fontsize><![CDATA[12]]></design:fontsize>
          <design:fontweight><![CDATA[normal]]></design:fontweight>
          <design:fontstyle><![CDATA[normal]]></design:fontstyle>
          <design:fontcolor><![CDATA[#000000]]></design:fontcolor>
        </extensionElements>
        <planItemOnPart id="sentryOnPartentryCriterion1" sourceRef="planItemexpandedStage1">
          <standardEvent>complete</standardEvent>
        </planItemOnPart>
      </sentry>
      <sentry id="sentryentryCriterion2">
        <extensionElements>
          <design:stencilid><![CDATA[EntryCriterion]]></design:stencilid>
          <design:fontsize><![CDATA[12]]></design:fontsize>
          <design:fontweight><![CDATA[normal]]></design:fontweight>
          <design:fontstyle><![CDATA[normal]]></design:fontstyle>
          <design:fontcolor><![CDATA[#000000]]></design:fontcolor>
        </extensionElements>
        <planItemOnPart id="sentryOnPartentryCriterion2" sourceRef="planItemexpandedStage2">
          <standardEvent>complete</standardEvent>
        </planItemOnPart>
      </sentry>
      <sentry id="sentrycmmnEntrySentry_3">
        <extensionElements>
          <design:stencilid><![CDATA[EntryCriterion]]></design:stencilid>
          <design:fontsize><![CDATA[12]]></design:fontsize>
          <design:fontweight><![CDATA[normal]]></design:fontweight>
          <design:fontstyle><![CDATA[normal]]></design:fontstyle>
          <design:fontcolor><![CDATA[#000000]]></design:fontcolor>
        </extensionElements>
        <planItemOnPart id="sentryOnPartcmmnEntrySentry_3" sourceRef="planItemuserEventListener1">
          <standardEvent>occur</standardEvent>
        </planItemOnPart>
      </sentry>
      <stage id="expandedStage2" name="Purchase Order Processing" autoComplete="true">
        <extensionElements>
          <design:stencilid><![CDATA[ExpandedStage]]></design:stencilid>
        </extensionElements>
        <planItem id="planItemprocessTask3" name="Prepare Shipment" definitionRef="processTask3"></planItem>
        <planItem id="planItemcmmnTask_3" name="Decide on Voucher Value" definitionRef="cmmnTask_3"></planItem>
        <planItem id="planItemcmmnTask_4" name="Store Order in Internal System" definitionRef="cmmnTask_4"></planItem>
        <processTask id="processTask3" name="Prepare Shipment" flowable:fallbackToDefaultTenant="true" flowable:sameDeployment="true">
          <extensionElements>
            <design:stencilid><![CDATA[ProcessTask]]></design:stencilid>
            <design:stencilsuperid><![CDATA[Task]]></design:stencilsuperid>
          </extensionElements>
          <processRefExpression><![CDATA[OOP_P003]]></processRefExpression>
        </processTask>
        <decisionTask id="cmmnTask_3" name="Decide on Voucher Value">
          <extensionElements>
            <flowable:decisionReferenceType><![CDATA[decisionTable]]></flowable:decisionReferenceType>
            <design:stencilid><![CDATA[DecisionTask]]></design:stencilid>
            <design:stencilsuperid><![CDATA[Task]]></design:stencilsuperid>
            <flowable:field name="decisionTaskThrowErrorOnNoHits">
              <flowable:string><![CDATA[false]]></flowable:string>
            </flowable:field>
            <flowable:field name="fallbackToDefaultTenant">
              <flowable:string><![CDATA[true]]></flowable:string>
            </flowable:field>
            <flowable:field name="sameDeployment">
              <flowable:string><![CDATA[true]]></flowable:string>
            </flowable:field>
          </extensionElements>
          <decisionRefExpression><![CDATA[oOP_DT001VoucherValue]]></decisionRefExpression>
        </decisionTask>
        <humanTask id="cmmnTask_4" name="Store Order in Internal System" flowable:assignee="${initiator}" flowable:formKey="oOP_F009StoreOrderForm" flowable:formFieldValidation="false">
          <extensionElements>
            <flowable:task-candidates-type><![CDATA[all]]></flowable:task-candidates-type>
            <flowable:element-rendering exposeToCaseView="true" label="Store Order" icon="floppy-disk/regular" index="2"></flowable:element-rendering>
            <flowable:state-rendering available="readOnly" active="fullAccess" completed="hidden" terminated="hidden"></flowable:state-rendering>
            <design:stencilid><![CDATA[HumanTask]]></design:stencilid>
            <design:stencilsuperid><![CDATA[Task]]></design:stencilsuperid>
          </extensionElements>
        </humanTask>
      </stage>
      <stage id="expandedStage3" name="Closing">
        <extensionElements>
          <design:stencilid><![CDATA[ExpandedStage]]></design:stencilid>
        </extensionElements>
        <planItem id="planItemprocessTask1" name="Customer Feedback Process" definitionRef="processTask1"></planItem>
        <processTask id="processTask1" name="Customer Feedback Process" flowable:fallbackToDefaultTenant="true" flowable:sameDeployment="true">
          <extensionElements>
            <design:stencilid><![CDATA[ProcessTask]]></design:stencilid>
            <design:stencilsuperid><![CDATA[Task]]></design:stencilsuperid>
          </extensionElements>
          <processRefExpression><![CDATA[OOP_P001]]></processRefExpression>
        </processTask>
      </stage>
      <stage id="expandedStage1" name="Purchase Order Request">
        <extensionElements>
          <design:stencilid><![CDATA[ExpandedStage]]></design:stencilid>
        </extensionElements>
        <planItem id="planItememailTask1" name="Order Confirmation Email for Customer" definitionRef="emailTask1"></planItem>
        <task id="emailTask1" name="Order Confirmation Email for Customer" flowable:type="mail">
          <extensionElements>
            <design:stencilid><![CDATA[EmailTask]]></design:stencilid>
            <design:stencilsuperid><![CDATA[Task]]></design:stencilsuperid>
            <flowable:field name="to">
              <flowable:expression><![CDATA[${emailAddress}]]></flowable:expression>
            </flowable:field>
            <flowable:field name="subject">
              <flowable:expression><![CDATA[Order Confirmation: ${root.caseSequence}]]></flowable:expression>
            </flowable:field>
            <flowable:field name="html">
              <flowable:expression><![CDATA[Hi ${root.firstName} ${root.lastName}
<br></br>
Thanks for creating a new order in our online shop. <br></br>
<b>Total price:</b> ${root.totalPrice}<br>
<b>Address: </b>${root.street} ${root.number}, ${root.zip} ${root.city}, ${root.country}
<br></br>
We will check whether the respective items are in stock and send them out soon.
<br></br>
Best regards,<br>
Your OnlineShop]]></flowable:expression>
            </flowable:field>
          </extensionElements>
        </task>
      </stage>
      <task id="cmmnTask_1" name="Case View" flowable:type="casePage" flowable:candidateGroups="flowableUser">
        <extensionElements>
          <flowable:state-rendering available="fullAccess" active="fullAccess" completed="readOnly" terminated="readOnly"></flowable:state-rendering>
          <flowable:page-element type="predefinedPage" subType="OPEN_TASKS" icon="bullseye-pointer/regular" name="Open Tasks" hideSaveButton="false" label="Open Tasks"></flowable:page-element>
          <flowable:page-element type="predefinedPage" subType="WORK_FORM" icon="user/regular" name="Customer Summary" hideSaveButton="false"></flowable:page-element>
          <flowable:page-element type="predefinedPage" subType="CHAT" icon="message-dots/regular" name="Chat" hideSaveButton="false" label="Chat"></flowable:page-element>
          <flowable:page-element type="predefinedPage" subType="DOCUMENTS" icon="file/regular" name="Documents" hideSaveButton="false" label="Documents"></flowable:page-element>
          <flowable:page-element type="predefinedPage" subType="DIAGRAM" icon="diagram-next/regular" name="Diagram" hideSaveButton="false" label="Diagram"></flowable:page-element>
          <flowable:page-element type="internalLink" icon="arrow-left/regular" url="/#/dashboard/OOP_PAGE001" urlTarget="_self" name="Back" hideSaveButton="false" label="Back"></flowable:page-element>
          <flowable:includeInHistory><![CDATA[true]]></flowable:includeInHistory>
          <design:stencilid><![CDATA[CasePageTask]]></design:stencilid>
          <design:stencilsuperid><![CDATA[Task]]></design:stencilsuperid>
          <design:impactparentcompletion><![CDATA[ignore]]></design:impactparentcompletion>
        </extensionElements>
      </task>
      <humanTask id="cmmnTask_2" name="Execute Task" flowable:assignee="${adHocAssignee}" flowable:formKey="OOB_F006" flowable:formFieldValidation="false" flowable:dueDate="P1D">
        <extensionElements>
          <flowable:task-candidates-type><![CDATA[all]]></flowable:task-candidates-type>
          <flowable:element-rendering exposeToCaseView="false" label="Ad-hoc Task" icon="diagram-subtask/regular" index="1"></flowable:element-rendering>
          <design:stencilid><![CDATA[HumanTask]]></design:stencilid>
          <design:stencilsuperid><![CDATA[Task]]></design:stencilsuperid>
        </extensionElements>
      </humanTask>
      <userEventListener id="userEventListener1" name="Create Ad-Hoc Task">
        <extensionElements>
          <flowable:startformkey><![CDATA[OOP_F005]]></flowable:startformkey>
          <flowable:startFormSameDeployment><![CDATA[true]]></flowable:startFormSameDeployment>
          <flowable:start-form-field-validation><![CDATA[false]]></flowable:start-form-field-validation>
          <design:stencilid><![CDATA[UserEventListener]]></design:stencilid>
          <design:stencilsuperid><![CDATA[EventListener]]></design:stencilsuperid>
          <design:display_ref_in_diagram><![CDATA[true]]></design:display_ref_in_diagram>
        </extensionElements>
      </userEventListener>
    </casePlanModel>
  </case>
  <cmmndi:CMMNDI>
    <cmmndi:CMMNDiagram id="CMMNDiagram_OOP_C001">
      <cmmndi:CMMNShape id="CMMNShape_onecaseplanmodel1" cmmnElementRef="onecaseplanmodel1">
        <dc:Bounds height="730.0" width="689.0" x="75.0" y="45.0"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_planItemexpandedStage2" cmmnElementRef="planItemexpandedStage2">
        <dc:Bounds height="173.0" width="476.0" x="106.0" y="323.0"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_entryCriterion1" cmmnElementRef="entryCriterion1">
        <dc:Bounds height="28.0" width="18.0" x="333.5" y="309.0"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_planItemprocessTask3" cmmnElementRef="planItemprocessTask3">
        <dc:Bounds height="80.0" width="100.0" x="142.25729350925093" y="369.2242531447326"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_planItemcmmnTask_3" cmmnElementRef="planItemcmmnTask_3">
        <dc:Bounds height="80.0" width="100.0" x="438.9362278832538" y="369.2242531447326"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_planItemcmmnTask_4" cmmnElementRef="planItemcmmnTask_4">
        <dc:Bounds height="80.0" width="100.0" x="291.0" y="369.2242531447326"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_planItemexpandedStage3" cmmnElementRef="planItemexpandedStage3">
        <dc:Bounds height="160.0" width="477.0" x="105.0" y="555.0"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_entryCriterion2" cmmnElementRef="entryCriterion2">
        <dc:Bounds height="28.0" width="18.0" x="335.25" y="541.0"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_planItemprocessTask1" cmmnElementRef="planItemprocessTask1">
        <dc:Bounds height="80.0" width="100.0" x="150.5" y="604.5"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_planItemexpandedStage1" cmmnElementRef="planItemexpandedStage1">
        <dc:Bounds height="157.0" width="477.0" x="105.0" y="90.0"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_planItememailTask1" cmmnElementRef="planItememailTask1">
        <dc:Bounds height="81.0" width="145.0" x="136.0" y="132.5"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_planItemcmmnTask_1" cmmnElementRef="planItemcmmnTask_1">
        <dc:Bounds height="80.0" width="100.0" x="618.249" y="90.0"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_planItemcmmnTask_2" cmmnElementRef="planItemcmmnTask_2">
        <dc:Bounds height="80.0" width="100.0" x="618.249" y="295.0"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_cmmnEntrySentry_3" cmmnElementRef="cmmnEntrySentry_3">
        <dc:Bounds height="28.0" width="18.0" x="659.249" y="361.0"></dc:Bounds>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNShape id="CMMNShape_planItemuserEventListener1" cmmnElementRef="planItemuserEventListener1">
        <dc:Bounds height="30.0" width="30.0" x="653.249" y="410.0"></dc:Bounds>
        <cmmndi:CMMNLabel>
          <dc:Bounds height="18.0" width="107.0" x="614.749" y="444.0"></dc:Bounds>
        </cmmndi:CMMNLabel>
      </cmmndi:CMMNShape>
      <cmmndi:CMMNEdge id="CMMNEdge_connector1" cmmnElementRef="planItemexpandedStage1" targetCMMNElementRef="entryCriterion1">
        <di:extension>
          <flowable:docker type="source" x="239.0" y="79.0"></flowable:docker>
          <flowable:docker type="target" x="9.0" y="14.0"></flowable:docker>
        </di:extension>
        <di:waypoint x="343.2402597402597" y="246.95"></di:waypoint>
        <di:waypoint x="342.6338446282764" y="309.2089552238806"></di:waypoint>
        <cmmndi:CMMNLabel>
          <dc:Bounds height="18.0" width="49.0" x="520.1875" y="298.0"></dc:Bounds>
        </cmmndi:CMMNLabel>
      </cmmndi:CMMNEdge>
      <cmmndi:CMMNEdge id="CMMNEdge_connector2" cmmnElementRef="planItemexpandedStage2" targetCMMNElementRef="entryCriterion2">
        <di:extension>
          <flowable:docker type="source" x="238.0" y="87.0"></flowable:docker>
          <flowable:docker type="target" x="9.0" y="14.0"></flowable:docker>
        </di:extension>
        <di:waypoint x="344.1481896551724" y="495.95000000000005"></di:waypoint>
        <di:waypoint x="344.2259266335499" y="541.0"></di:waypoint>
        <cmmndi:CMMNLabel>
          <dc:Bounds height="18.0" width="49.0" x="543.140625" y="533.0"></dc:Bounds>
        </cmmndi:CMMNLabel>
      </cmmndi:CMMNEdge>
      <cmmndi:CMMNEdge id="CMMNEdge_cmmnConnector_4" cmmnElementRef="planItemuserEventListener1" targetCMMNElementRef="cmmnEntrySentry_3">
        <di:extension>
          <flowable:docker type="source" x="15.0" y="15.0"></flowable:docker>
          <flowable:docker type="target" x="9.0" y="14.0"></flowable:docker>
        </di:extension>
        <di:waypoint x="668.249" y="410.0"></di:waypoint>
        <di:waypoint x="668.249" y="388.8936661961892"></di:waypoint>
        <cmmndi:CMMNLabel></cmmndi:CMMNLabel>
      </cmmndi:CMMNEdge>
    </cmmndi:CMMNDiagram>
  </cmmndi:CMMNDI>
</definitions>